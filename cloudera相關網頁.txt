Cloudera原廠文件
https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/installation.html

Cloudera簡介和安裝部署概述
https://www.itread01.com/content/1547694756.html

SOP - 封閉網路環境中安裝設定 CDH
https://www.athemaster.com/resources/58

CM6 RPM檔案
https://archive.cloudera.com/cm6/6.3.1/redhat7/yum/RPMS/x86_64/
https://archive.cloudera.com/cm6/6.3.1/redhat7/yum/RPMS/x86_64/cloudera-manager-server-6.3.1-1466458.el7.x86_64.rpm

Step by Step 实现基于 Cloudera 5.8.2 的企业级安全大数据平台 - 传输层加密配置 - Clouder Manager 组件传输层加密
https://www.jianshu.com/p/ccfff00bc37d


RPM指令說明
http://blog.itist.tw/2016/09/install-delete-upgrade-downgrade-and-verify-rpm-packages-on-centos-7.html

cloudera軟體下載
https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/RPMS/x86_64/

cloudera host is in bad health
然後刪除guid文件：
rm /var/lib/cloudera-scm-agent/cm_guid

failed to start lsb cloudera scm server's embedded db
打開此/etc/cloudera-scm-server/db.propertie
在CDH服務中，我將嵌入式postgresql用作服務器數據庫。但是不建議Cloudera官方使用。我是Cloudera的新手，所以我犯了一個錯誤。我錯誤地使用了僅為Cloudera Manager Server外部數據庫準備的命令。
#CM5
/usr/share/cmf/schema/scm_prepare_database.sh postgresql scm scm scm
#CM6
/opt/cloudera/cm/schema/scm_prepare_database.sh postgresql scm scm scm
/usr/share/cmf/schema/scm_prepare_database.sh postgresql scm scm scm_password
上面的命令可以配置 db.properties(cd /etc/cloudera-scm-server)
只要您在上述命令中運行，com.cloudera.cmf.db.setupType它將設置為EXTERNAL（有關此詳細信息，您可以在Cloudera docs中找到
最直接，最有效的方法是重置scm的密碼。

然後

更新密碼
將類型設置為EMBEDDED
使端口7432監聽（可以netstat -nltp用來檢查）
在db.properties中。

#vim cat /etc/cloudera-scm-server/db.properties
Auto-generated by scm_prepare_database.sh
Sat Oct 1 12:19:15 PDT 201
com.cloudera.cmf.db.type=postgresql
com.cloudera.cmf.db.host=localhost:7432
com.cloudera.cmf.db.name=scm
com.cloudera.cmf.db.user=scm
com.cloudera.cmf.db.password=new_password
com.cloudera.cmf.db.setupType=EMBEDDED
現在，關閉所有Cloudera的供應鏈管理服務，並重新啟動才能server-db，server，agent。


解決postgres嵌入問題
https://stackoverflow.com/questions/49489037/can-not-start-cloudera-scm-server-db-because-of-the-cm-is-using-external-db
如果打開此/etc/cloudera-scm-server/db.properties文件，如下所示。.com.cloudera.cmf.db.type=postgresql
com.cloudera.cmf.db.host=localhost
com.cloudera.cmf.db.name=scm
com.cloudera.cmf.db.user=scm
com.cloudera.cmf.db.password=TXqEESuhj5
com.cloudera.cmf.db.setupType=EXTERNAL
修改host與setupType
com.cloudera.cmf.db.type=postgresql
com.cloudera.cmf.db.host=localhost:7432
com.cloudera.cmf.db.name=scm
com.cloudera.cmf.db.user=scm
com.cloudera.cmf.db.password=new_password
com.cloudera.cmf.db.setupType=EMBEDDED

错误提示：
Warning: RPMDB altered outside of yum
解决办法：
删除yum的历史记录 
rm -rf /var/lib/yum/history/*.sqlite  
上面的命令需要root或同等权限才能执行
